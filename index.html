<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Brunch - Independent Financial Research</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link rel="stylesheet" href="css/styles.css">
    
    <!-- Meta Tags -->
    <meta name="description" content="Independent financial research and analysis for informed investment decisions.">
    <meta name="keywords" content="financial research, investment analysis, banking sector, equity funds, retirement planning">
    <meta name="author" content="Financial Brunch">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="nav">
            <div class="nav-container">
                <div class="nav-brand">
                    <a href="#" class="logo">
                        <h1 class="logo-text">Financial Brunch</h1>
                    </a>
                </div>
                
                <div class="nav-menu" id="nav-menu">
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="#" class="nav-link">Research</a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">Analysis</a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">Reports</a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">About</a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">Contact</a>
                        </li>
                    </ul>
                </div>
                
                <div class="nav-actions">
                    <div class="language-toggle">
                        <button class="lang-btn active" data-lang="en">EN</button>
                        <button class="lang-btn" data-lang="id">ID</button>
                    </div>
                    <button class="nav-toggle" id="nav-toggle">
                        <span class="hamburger"></span>
                        <span class="hamburger"></span>
                        <span class="hamburger"></span>
                    </button>
                </div>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <h1 class="hero-title">Independent Financial Research</h1>
                <p class="hero-subtitle">Comprehensive analysis and insights for informed investment decisions in Southeast Asian markets</p>
                <div class="hero-actions">
                    <a href="#newsletter" class="btn btn-primary">Subscribe to Research</a>
                    <a href="#featured" class="btn btn-secondary">Browse Reports</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Featured Research Carousel Section -->
    <section class="featured" id="featured">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Featured Research</h2>
                <p class="section-subtitle">Latest insights and analysis from our research team</p>
            </div>
            
            <div class="carousel-container">
                <div class="carousel-wrapper">
                    <div class="carousel-track" id="carousel-track">
                        <!-- CMS Articles will be loaded here dynamically -->
                        <!-- Fallback content for when CMS is loading -->
                        <div class="carousel-slide active">
                            <div class="slide-background">
                                <div class="slide-image"></div>
                                <div class="slide-overlay"></div>
                            </div>
                            <div class="slide-content">
                                <div class="slide-meta">
                                    <span class="slide-category">Loading...</span>
                                    <span class="slide-date">...</span>
                                </div>
                                <h3 class="slide-title">Loading Latest Research...</h3>
                                <p class="slide-excerpt">Please wait while we load the latest research articles from our content management system.</p>
                                <a href="#" class="slide-cta">Loading...</a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Carousel Navigation -->
                <button class="carousel-nav carousel-prev" id="carousel-prev" aria-label="Previous slide">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
                <button class="carousel-nav carousel-next" id="carousel-next" aria-label="Next slide">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>

                <!-- Carousel Indicators -->
                <div class="carousel-indicators" id="carousel-indicators">
                    <!-- Indicators will be generated dynamically -->
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Why Choose Financial Brunch</h2>
                <p class="section-subtitle">Independent research backed by deep market expertise</p>
            </div>
            
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <h3 class="feature-title">Independent Analysis</h3>
                    <p class="feature-description">Unbiased research free from conflicts of interest, providing objective insights for your investment decisions.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <polyline points="3.27,6.96 12,12.01 20.73,6.96" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <line x1="12" y1="22.08" x2="12" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <h3 class="feature-title">Deep Market Knowledge</h3>
                    <p class="feature-description">Extensive expertise in Southeast Asian markets with focus on emerging opportunities and risk assessment.</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <h3 class="feature-title">Actionable Insights</h3>
                    <p class="feature-description">Practical recommendations and strategic guidance to help you make informed investment decisions with confidence.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Newsletter Section -->
    <section class="newsletter" id="newsletter">
        <div class="container">
            <div class="newsletter-content">
                <div class="newsletter-text">
                    <h2 class="newsletter-title">Stay Informed</h2>
                    <p class="newsletter-description">Get our latest research reports and market insights delivered directly to your inbox.</p>
                </div>
                <form class="newsletter-form">
                    <div class="form-group">
                        <input type="email" class="form-input" placeholder="Enter your email address" required>
                        <button type="submit" class="btn btn-primary">Subscribe</button>
                    </div>
                    <p class="form-disclaimer">By subscribing, you agree to receive our research updates. Unsubscribe at any time.</p>
                </form>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3 class="footer-title">Financial Brunch</h3>
                    <p class="footer-description">Independent financial research for informed investment decisions.</p>
                    <div class="footer-social">
                        <a href="#" class="social-link">LinkedIn</a>
                        <a href="#" class="social-link">Twitter</a>
                        <a href="#" class="social-link">Newsletter</a>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h4 class="footer-subtitle">Research</h4>
                    <ul class="footer-links">
                        <li><a href="#" class="footer-link">Banking Sector</a></li>
                        <li><a href="#" class="footer-link">Equity Analysis</a></li>
                        <li><a href="#" class="footer-link">Fixed Income</a></li>
                        <li><a href="#" class="footer-link">Market Updates</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4 class="footer-subtitle">Company</h4>
                    <ul class="footer-links">
                        <li><a href="#" class="footer-link">About Us</a></li>
                        <li><a href="#" class="footer-link">Our Team</a></li>
                        <li><a href="#" class="footer-link">Methodology</a></li>
                        <li><a href="#" class="footer-link">Contact</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4 class="footer-subtitle">Legal</h4>
                    <ul class="footer-links">
                        <li><a href="#" class="footer-link">Privacy Policy</a></li>
                        <li><a href="#" class="footer-link">Terms of Service</a></li>
                        <li><a href="#" class="footer-link">Disclaimers</a></li>
                        <li><a href="#" class="footer-link">Compliance</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p class="footer-copyright">&copy; 2024 Financial Brunch. All rights reserved.</p>
                <p class="footer-disclaimer">Investment research and analysis for informational purposes only. Not investment advice.</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="js/main.js"></script>
    
    <!-- CMS Integration Script -->
    <script>
        // CMS Content Loader for Financial Brunch
        class CMSLoader {
            constructor() {
                this.currentLanguage = 'en';
                this.articles = [];
                this.currentSlide = 0;
                this.init();
            }

            async init() {
                await this.loadCMSArticles();
                this.setupLanguageToggle();
                this.setupCarousel();
            }

            async loadCMSArticles() {
                try {
                    // Try to fetch articles from GitHub API (public repo)
                    const repoUrl = 'https://api.github.com/repos/YOUR_USERNAME/YOUR_REPO_NAME/contents/content/research';
                    const response = await fetch(repoUrl);
                    
                    if (response.ok) {
                        const files = await response.json();
                        const articles = await this.processMarkdownFiles(files);
                        if (articles.length > 0) {
                            this.articles = articles;
                            this.renderArticles();
                            return;
                        }
                    }
                } catch (error) {
                    console.log('Could not load from GitHub API, using fallback content');
                }

                // Fallback: Use sample content if CMS articles not available
                this.loadFallbackContent();
            }

            async processMarkdownFiles(files) {
                const articles = [];
                
                for (const file of files.slice(0, 4)) { // Limit to 4 articles for carousel
                    if (file.name.endsWith('.md')) {
                        try {
                            const contentResponse = await fetch(file.download_url);
                            const content = await contentResponse.text();
                            const article = this.parseMarkdown(content, file.name);
                            if (article) articles.push(article);
                        } catch (error) {
                            console.log(`Error loading ${file.name}:`, error);
                        }
                    }
                }
                
                return articles.sort((a, b) => new Date(b.date) - new Date(a.date));
            }

            parseMarkdown(content, filename) {
                // Parse front matter
                const frontMatterMatch = content.match(/^---\n([\s\S]*?)\n---/);
                if (!frontMatterMatch) return null;

                const frontMatter = {};
                const frontMatterLines = frontMatterMatch[1].split('\n');
                
                frontMatterLines.forEach(line => {
                    const [key, ...valueParts] = line.split(':');
                    if (key && valueParts.length > 0) {
                        const value = valueParts.join(':').trim().replace(/^["']|["']$/g, '');
                        frontMatter[key.trim()] = value;
                    }
                });

                // Create slug from filename
                const slug = filename.replace('.md', '').replace(/^\d{4}-\d{2}-\d{2}-/, '');

                return {
                    title: frontMatter.title || 'Untitled',
                    title_id: frontMatter.title_id || frontMatter.title || 'Tanpa Judul',
                    excerpt: frontMatter.excerpt || 'No excerpt available',
                    excerpt_id: frontMatter.excerpt_id || frontMatter.excerpt || 'Tidak ada ringkasan',
                    category: frontMatter.category || 'Research',
                    date: frontMatter.date || new Date().toISOString(),
                    slug: slug,
                    featured: frontMatter.featured === 'true' || frontMatter.featured === true
                };
            }

            loadFallbackContent() {
                this.articles = [
                    {
                        title: "Indonesian Banking Sector Outlook H2 2024",
                        title_id: "Prospek Sektor Perbankan Indonesia H2 2024",
                        excerpt: "Comprehensive analysis of Indonesia's banking sector performance and growth prospects for the second half of 2024.",
                        excerpt_id: "Analisis komprehensif kinerja sektor perbankan Indonesia dan prospek pertumbuhan untuk semester kedua 2024.",
                        category: "Banking",
                        date: "2024-07-28",
                        slug: "indonesian-banking-outlook-h2-2024"
                    },
                    {
                        title: "Fixed Income Strategy for Retirement",
                        title_id: "Strategi Pendapatan Tetap untuk Pensiun",
                        excerpt: "Strategic approach to building a robust fixed income portfolio for retirement planning in the current interest rate environment.",
                        excerpt_id: "Pendekatan strategis untuk membangun portofolio pendapatan tetap yang kuat untuk perencanaan pensiun di lingkungan suku bunga saat ini.",
                        category: "Retirement",
                        date: "2024-06-15",
                        slug: "fixed-income-retirement-strategy"
                    },
                    {
                        title: "Top Performing Equity Funds",
                        title_id: "Reksa Dana Saham Berkinerja Terbaik",
                        excerpt: "Analysis of the best performing equity funds in Southeast Asia with detailed performance metrics and investment strategies.",
                        excerpt_id: "Analisis reksa dana saham berkinerja terbaik di Asia Tenggara dengan metrik kinerja terperinci dan strategi investasi.",
                        category: "Equity",
                        date: "2024-05-20",
                        slug: "top-performing-equity-funds"
                    },
                    {
                        title: "Southeast Asian Markets Weekly",
                        title_id: "Pasar Asia Tenggara Mingguan",
                        excerpt: "Weekly market overview covering key developments, policy changes, and investment opportunities across the region.",
                        excerpt_id: "Ikhtisar pasar mingguan yang mencakup perkembangan utama, perubahan kebijakan, dan peluang investasi di seluruh wilayah.",
                        category: "Market Update",
                        date: "2024-08-01",
                        slug: "southeast-asian-markets-weekly"
                    }
                ];
                this.renderArticles();
            }

            renderArticles() {
                const carouselTrack = document.getElementById('carousel-track');
                const indicators = document.getElementById('carousel-indicators');
                
                if (!carouselTrack || !indicators) return;

                // Clear existing content
                carouselTrack.innerHTML = '';
                indicators.innerHTML = '';

                // Render articles
                this.articles.forEach((article, index) => {
                    const slide = this.createSlide(article, index);
                    carouselTrack.appendChild(slide);

                    const indicator = this.createIndicator(index);
                    indicators.appendChild(indicator);
                });

                // Set first slide as active
                if (this.articles.length > 0) {
                    carouselTrack.firstElementChild.classList.add('active');
                    indicators.firstElementChild.classList.add('active');
                }
            }

            createSlide(article, index) {
                const slide = document.createElement('div');
                slide.className = 'carousel-slide';
                if (index === 0) slide.classList.add('active');

                const title = this.currentLanguage === 'id' ? article.title_id : article.title;
                const excerpt = this.currentLanguage === 'id' ? article.excerpt_id : article.excerpt;
                const date = new Date(article.date).toLocaleDateString(
                    this.currentLanguage === 'id' ? 'id-ID' : 'en-US',
                    { year: 'numeric', month: 'long', day: 'numeric' }
                );

                slide.innerHTML = `
                    <div class="slide-background">
                        <div class="slide-image"></div>
                        <div class="slide-overlay"></div>
                    </div>
                    <div class="slide-content">
                        <div class="slide-meta">
                            <span class="slide-category">${article.category}</span>
                            <span class="slide-date">${date}</span>
                        </div>
                        <h3 class="slide-title">${title}</h3>
                        <p class="slide-excerpt">${excerpt}</p>
                        <a href="/research/${article.slug}" class="slide-cta">
                            ${this.currentLanguage === 'id' ? 'Baca Laporan Lengkap' : 'Read Full Report'}
                        </a>
                    </div>
                `;

                return slide;
            }

            createIndicator(index) {
                const indicator = document.createElement('button');
                indicator.className = 'indicator';
                indicator.setAttribute('data-slide', index);
                indicator.setAttribute('aria-label', `Go to slide ${index + 1}`);
                if (index === 0) indicator.classList.add('active');

                indicator.addEventListener('click', () => {
                    this.goToSlide(index);
                });

                return indicator;
            }

            setupLanguageToggle() {
                const langButtons = document.querySelectorAll('.lang-btn');
                langButtons.forEach(btn => {
                    btn.addEventListener('click', () => {
                        const lang = btn.getAttribute('data-lang');
                        if (lang !== this.currentLanguage) {
                            this.currentLanguage = lang;
                            
                            // Update active button
                            langButtons.forEach(b => b.classList.remove('active'));
                            btn.classList.add('active');
                            
                            // Re-render articles with new language
                            this.renderArticles();
                        }
                    });
                });
            }

            setupCarousel() {
                const prevBtn = document.getElementById('carousel-prev');
                const nextBtn = document.getElementById('carousel-next');

                if (prevBtn) {
                    prevBtn.addEventListener('click', () => this.prevSlide());
                }

                if (nextBtn) {
                    nextBtn.addEventListener('click', () => this.nextSlide());
                }

                // Auto-play carousel
                setInterval(() => {
                    this.nextSlide();
                }, 10000); // Change slide every 10 seconds
            }

            prevSlide() {
                this.currentSlide = this.currentSlide === 0 ? this.articles.length - 1 : this.currentSlide - 1;
                this.goToSlide(this.currentSlide);
            }

            nextSlide() {
                this.currentSlide = this.currentSlide === this.articles.length - 1 ? 0 : this.currentSlide + 1;
                this.goToSlide(this.currentSlide);
            }

            goToSlide(index) {
                const slides = document.querySelectorAll('.carousel-slide');
                const indicators = document.querySelectorAll('.indicator');

                slides.forEach((slide, i) => {
                    slide.classList.toggle('active', i === index);
                });

                indicators.forEach((indicator, i) => {
                    indicator.classList.toggle('active', i === index);
                });

                this.currentSlide = index;
            }
        }

        // Initialize CMS Loader when page loads
        document.addEventListener('DOMContentLoaded', () => {
            new CMSLoader();
        });
    </script>
</body>
</html>